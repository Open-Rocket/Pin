# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö-–õ–ò–°–¢: –°—Ç—Ä–æ–≥–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Mini App

## –¢–†–ï–ë–û–í–ê–ù–ò–ï 1Ô∏è‚É£: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram WebApp API

- [x] `WebApp.ready()` - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- [x] `WebApp.expand()` - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
- [x] `WebApp.disallowVerticalSwipe()` - –ø–µ—Ä–≤–∞—è –ª–∏–Ω–∏—è –∑–∞—â–∏—Ç—ã
- [x] `WebApp.lockOrientation()` - –∑–∞–ª–æ—á–∏—Ç—å –ø–æ—Ä—Ç—Ä–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º
- [x] `WebApp.showCloseButton()` - –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (—Ñ–∞–π–ª: `hooks/useTelegram.ts`)

---

## –¢–†–ï–ë–û–í–ê–ù–ò–ï 2Ô∏è‚É£: –ñ–µ—Å—Ç–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞—Ç–∏–≤–Ω—ã—Ö touch-—Å–æ–±—ã—Ç–∏–π

- [x] `preventDefault` –Ω–∞ `touchmove` —Å–æ–±—ã—Ç–∏—è—Ö
- [x] `passive: false` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è preventDefault
- [x] –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (`[data-allow-scroll]`)
- [x] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ overscroll behavior
- [x] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ wheel —Å–æ–±—ã—Ç–∏–π (–¥–ª—è –º—ã—à–∏)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

```typescript
// –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –í–°–ï touchmove —Å–æ–±—ã—Ç–∏—è
document.addEventListener('touchmove', preventTouchMove, { passive: false });

// –ë–ª–æ–∫–∏—Ä—É–µ–º –µ—Å–ª–∏ –Ω–µ –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
if (!scrollableElement) {
  e.preventDefault(); // üîí –ë–õ–û–ö–ò–†–£–ï–ú
}
```

**–§–∞–π–ª**: `hooks/useTelegram.ts` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `setupTouchLock()`

---

## –¢–†–ï–ë–û–í–ê–ù–ò–ï 3Ô∏è‚É£: –§–∏–∫—Å–∞—Ü–∏—è viewport

- [x] `html { position: fixed; width: 100%; height: 100%; overflow: hidden; }`
- [x] `body { position: fixed; width: 100%; height: 100%; overflow: hidden; }`
- [x] –ó–∞–ø—Ä–µ—Ç `overscroll-behavior`
- [x] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è —á–µ—Ä–µ–∑ div –æ–±–µ—Ä—Ç–∫—É –≤ DOM

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª—ã**:

- `app/globals.css` - CSS —Å—Ç–∏–ª–∏
- `app/layout.tsx` - DOM –æ–±–µ—Ä—Ç–∫–∞

---

## –¢–†–ï–ë–û–í–ê–ù–ò–ï 4Ô∏è‚É£: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–∫—Ä–æ–ª–ª

- [x] –°–∫—Ä–æ–ª–ª **–¢–û–õ–¨–ö–û** –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- [x] –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ `data-allow-scroll` –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞
- [x] `overflow-y-auto` –Ω–∞ –º–æ–¥–∞–ª—è—Ö
- [x] `-webkit-overflow-scrolling: touch` –¥–ª—è –≥–ª–∞–¥–∫–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ iOS
- [x] `window` / `body` **–ù–ò–ö–û–ì–î–ê** –Ω–µ —Å–∫—Ä–æ–ª–ª—è—Ç—Å—è

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ú–æ–¥–∞–ª–∏ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º**:

- ‚úÖ `components/PinCard.tsx` - –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–∏–Ω–∞ (—Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è)
- ‚úÖ `components/CreatePinForm.tsx` - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è (—Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è)
- ‚úÖ `components/ContactModal.tsx` - –º–æ–¥–∞–ª—å –∫–æ–Ω—Ç–∞–∫—Ç–∞ (—Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è)

---

## –¢–†–ï–ë–û–í–ê–ù–ò–ï 5Ô∏è‚É£: –†–∞–±–æ—Ç–∞—Ç—å –Ω–∞ iOS Telegram

- [x] –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iOS –∏ Android
- [x] –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö iOS (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç multiple fallbacks)
- [x] –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞
- [x] –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –µ—Å–ª–∏ WebApp API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å F12):

```
üîí Telegram Mini App Touch Lock –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
‚úÖ –°–≤–∞–π–ø –≤–Ω–∏–∑ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
‚úÖ Overscroll –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ
‚úÖ Body/HTML —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã
```

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê

### –ù–∞ iOS Telegram:

```
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–≤–∞–π–ø–µ –≤–Ω–∏–∑
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–≤–∞–π–ø–µ –≤–Ω–∏–∑
‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –∫–Ω–æ–ø–∫–æ–π X
‚úÖ –°–∫—Ä–æ–ª–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–æ–¥–∞–ª—è—Ö
‚úÖ Body –ù–ï —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è
‚úÖ Window –ù–ï —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è
‚úÖ –ù–µ—Ç —Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ gestures
```

### –ù–∞ Android Telegram:

```
‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞ iOS
‚úÖ –°–≤–∞–π–ø –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚úÖ –°–∫—Ä–æ–ª–ª –≤ –º–æ–¥–∞–ª—è—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è        | –ò–∑–º–µ–Ω–µ–Ω–æ              |
| ---------------- | --------------------- |
| –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ | 6                     |
| –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏    | 1 (setupTouchLock)    |
| –ù–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã   | 3 (data-allow-scroll) |
| –°—Ç–∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã  | 2 (html/body fix)     |
| –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã    | 5                     |

---

## üîê –£–†–û–í–ù–ò –ó–ê–©–ò–¢–´

| #   | –ú–µ—Ö–∞–Ω–∏–∑–º                       | –ì–¥–µ                          | –ó–∞—á–µ–º                      |
| --- | ------------------------------ | ---------------------------- | -------------------------- |
| 1   | `disallowVerticalSwipe()`      | `useTelegram.ts`             | –°–æ–æ–±—â–∏—Ç—å Telegram          |
| 2   | `preventDefault(touchmove)`    | `setupTouchLock()`           | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–≤–∞–π–ø JS     |
| 3   | `overscroll-behavior: none`    | `globals.css`                | –ó–∞–ø—Ä–µ—Ç–∏—Ç—å bounce-—ç—Ñ—Ñ–µ–∫—Ç    |
| 4   | `position: fixed` –Ω–∞ html/body | `globals.css` + `layout.tsx` | –§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å viewport       |
| 5   | `data-allow-scroll` —Å–µ–ª–µ–∫—Ç–æ—Ä   | –ú–æ–¥–∞–ª–∏                       | –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–∫—Ä–æ–ª–ª –≥–¥–µ –Ω—É–∂–Ω–æ |

**–ï—Å–ª–∏ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –¥—Ä—É–≥–æ–π!**

---

## üöÄ –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ –ò –ü–†–û–í–ï–†–ò–¢–¨

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
npm run dev

# 2. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram Mini App
# 3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
# 4. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ –∏–∑ setupTouchLock()

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
# - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–≤–∞–π–ø–∏—Ç—å –≤–Ω–∏–∑ —Å –ª—é–±–æ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞
# - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –¥–æ–ª–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å—Å—è
# - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –ø–∏–Ω–∞ - —Å–∫—Ä–æ–ª–ª–∏—Ç–µ —Ñ–æ—Ä–º—É
# - –°–≤–∞–π–ø –≤–Ω–∏–∑ –ù–ï –∑–∞–∫—Ä–æ–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É X - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ
```

---

## üìù –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- **[TG_STRICT_LOCK_EXPLAINED.md](./TG_STRICT_LOCK_EXPLAINED.md)** - –ü–æ–ª–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ—á–µ–º—É —Å–≤–∞–π–ø –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –∫–∞–∫ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É
- **[TG_LOCK_SOLUTION.md](./TG_LOCK_SOLUTION.md)** - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Ä–µ—à–µ–Ω–∏—è

---

## ‚ú® –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

**–ó–ê–ö–†–´–¢–û**: ‚úÖ Mini App –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è —Å–≤–∞–π–ø–æ–º –≤–Ω–∏–∑  
**–ë–õ–û–ö–ò–†–û–í–ê–ù–û**: ‚úÖ Body/window/html –Ω–µ —Å–∫—Ä–æ–ª–ª—è—Ç—Å—è  
**–†–ê–ó–†–ï–®–ï–ù–û**: ‚úÖ –°–∫—Ä–æ–ª–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–æ–¥–∞–ª—è—Ö  
**–ì–ê–†–ê–ù–¢–ò–Ø**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö iOS Telegram

**–≠—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∂–µ—Å—Ç–∫–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Mini App.**

---

## üéì –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ü–û–î–†–û–ë–ù–û–°–¢–ò

–ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã –¥–µ—Ç–∞–ª–∏:

1. **–ü–æ—á–µ–º—É `passive: false` –∫—Ä–∏—Ç–∏—á–µ–Ω?**

   - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `passive: true` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –ø–µ—Ä–µ–¥ –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
   - `passive: false` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ `preventDefault()` —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ü–ï–†–ï–î –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –±—Ä–∞—É–∑–µ—Ä–∞

2. **–ü–æ—á–µ–º—É –Ω—É–∂–Ω–∞ –¥–≤–æ–π–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è (CSS + DOM)?**

   - CSS –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ JavaScript
   - DOM-–æ–±–µ—Ä—Ç–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ viewport —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –≠—Ç–æ –¥–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ª–∏–Ω–∏–∏ –∑–∞—â–∏—Ç—ã

3. **–ü–æ—á–µ–º—É `[data-allow-scroll]` –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–æ–≤?**
   - –ê—Ç—Ä–∏–±—É—Ç—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç Tailwind –∫–ª–∞—Å—Å–æ–≤
   - –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ –∏ —è–≤–Ω–æ
   - –õ–µ–≥—á–µ –¥–µ–±–∞–≥–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

---

**–í–°–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´.** ‚úÖ

–≠—Ç–æ **—Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Mini App.
