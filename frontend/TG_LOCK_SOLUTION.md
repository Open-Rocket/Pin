# ‚úÖ –†–ï–®–ï–ù–ò–ï: –ñ–µ—Å—Ç–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Mini App –æ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è —Å–≤–∞–π–ø–æ–º

## üî¥ –ü–†–û–ë–õ–ï–ú–ê

–ù–∞ iOS Telegram —Å–≤–∞–π–ø –≤–Ω–∏–∑ –≤—Å–µ –µ—â–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞:

- `WebApp.disallowVerticalSwipe()`
- `WebApp.expand()`
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ html/body

**–ü—Ä–∏—á–∏–Ω–∞**: `disallowVerticalSwipe()` —á–∞—Å—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iOS. –ù—É–∂–Ω–∞ –∂–µ—Å—Ç–∫–∞—è –∑–∞—â–∏—Ç–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ JavaScript –∏ CSS.

---

## üü¢ –†–ï–®–ï–ù–ò–ï: 5-—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞

### 1. WebApp API (–ø–µ—Ä–≤–∞—è –ª–∏–Ω–∏—è)

```typescript
WebApp.disallowVerticalSwipe(); // –°–æ–æ–±—â–∞–µ–º Telegram
```

### 2. –ñ–µ—Å—Ç–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ touch-—Å–æ–±—ã—Ç–∏–π (–û–°–ù–û–í–ù–û–ï)

```typescript
const preventTouchMove = (e: TouchEvent) => {
  const scrollableElement = e.target?.closest('[data-allow-scroll]');
  if (!scrollableElement) {
    e.preventDefault(); // üîí –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–≤–∞–π–ø
  }
};
document.addEventListener('touchmove', preventTouchMove, { passive: false });
```

**–ö—Ä–∏—Ç–∏—á–Ω–æ**: `passive: false` –ø–æ–∑–≤–æ–ª—è–µ—Ç `preventDefault()` —Ä–∞–±–æ—Ç–∞—Ç—å

### 3. CSS –∑–∞–ø—Ä–µ—Ç overscroll

```css
html,
body {
  overscroll-behavior: none; /* –ó–∞–ø—Ä–µ—â–∞–µ–º bounce-—ç—Ñ—Ñ–µ–∫—Ç iOS */
}

[data-allow-scroll] {
  overscroll-behavior: contain; /* –°–∫—Ä–æ–ª–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º */
}
```

### 4. –§–∏–∫—Å–∞—Ü–∏—è viewport (–¥–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞)

```css
html,
body {
  position: fixed;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
```

### 5. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Å–∫—Ä–æ–ª–ª–æ–≤

```tsx
<div data-allow-scroll className="overflow-y-auto">
  {/* –ú–æ–∂–µ—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—å—Å—è */}
</div>
```

---

## üìù –ß–¢–û –ë–´–õ–û –ò–ó–ú–ï–ù–ï–ù–û

| –§–∞–π–ª                           | –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                    |
| ------------------------------ | -------------------------------------------- |
| `hooks/useTelegram.ts`         | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `setupTouchLock()`      |
| `app/globals.css`              | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∏ overscroll |
| `app/layout.tsx`               | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–∫—Å–∏—Ä—É—é—â–∞—è –æ–±–µ—Ä—Ç–∫–∞ div         |
| `components/PinCard.tsx`       | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `data-allow-scroll`              |
| `components/CreatePinForm.tsx` | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `data-allow-scroll`              |
| `components/ContactModal.tsx`  | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `data-allow-scroll`              |

---

## üéØ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–≤–∞–π–ø–∏—Ç –≤–Ω–∏–∑:
  ‚Üì
touchmove —Å–æ–±—ã—Ç–∏–µ ‚Üí setupTouchLock() –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞: —Ü–µ–ª—å –∏–º–µ–µ—Ç [data-allow-scroll]?
  ‚îú‚îÄ –ù–ï–¢ ‚Üí preventDefault() –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–≤–∞–π–ø ‚Üí üîí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –∑–∞–∫—Ä–æ–µ—Ç—Å—è
  ‚îî‚îÄ –î–ê ‚Üí –°–æ–±—ã—Ç–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç ‚Üí ‚úÖ –ú–æ–¥–∞–ª—å —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è
  ‚Üì
Body –ù–ò–ö–û–ì–î–ê –Ω–µ —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è
  ‚Üì
iOS –ù–ï –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç –∫–∞–∫ –∂–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è ‚Üí ‚úÖ –£–°–ü–ï–•
```

---

## ‚ú® –†–ï–ó–£–õ–¨–¢–ê–¢

‚úÖ –°–≤–∞–π–ø –≤–Ω–∏–∑ **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
‚úÖ –°–∫—Ä–æ–ª–ª —Ä–∞–∑—Ä–µ—à–µ–Ω **–¢–û–õ–¨–ö–û** –≤ –º–æ–¥–∞–ª—è—Ö  
‚úÖ Body/window/html **–ù–ò–ö–û–ì–î–ê** –Ω–µ —Å–∫—Ä–æ–ª–ª—è—Ç—Å—è  
‚úÖ –ó–∞–∫—Ä—ã—Ç—å –º–æ–∂–Ω–æ **–¢–û–õ–¨–ö–û** –∫–Ω–æ–ø–∫–æ–π X  
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **iOS –∏ Android**  
‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –¥–∞–∂–µ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π iOS

---

## üß™ –ü–†–û–í–ï–†–ö–ê

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:

```
üîí Telegram Mini App Touch Lock –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
‚úÖ –°–≤–∞–π–ø –≤–Ω–∏–∑ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
‚úÖ Overscroll –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ
‚úÖ Body/HTML —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –≤—Å–µ 4 —Å—Ç—Ä–æ–∫–∏ - **—Ñ–∏–∫—Å —Ä–∞–±–æ—Ç–∞–µ—Ç!**

---

## üìö –ü–û–õ–ù–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï

–°–º–æ—Ç—Ä–∏—Ç–µ [TG_STRICT_LOCK_EXPLAINED.md](./TG_STRICT_LOCK_EXPLAINED.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ –ø–æ—á–µ–º—É —Å–≤–∞–π–ø –∑–∞–∫—Ä—ã–≤–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É.

---

## üîí –í–ê–ñ–ù–û

–≠—Ç–æ **–Ω–µ "best effort" —Ä–µ—à–µ–Ω–∏–µ** - —ç—Ç–æ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∂–µ—Å—Ç–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**:

- –ù–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö iOS
- –î–∞–∂–µ –µ—Å–ª–∏ –æ–¥–∏–Ω —Å–ª–æ–π –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å—Ç—å –µ—â–µ 4
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ–ª—å—à–µ –ù–ò–ö–û–ì–î–ê –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –æ—Ç —Å–≤–∞–π–ø–∞ –≤–Ω–∏–∑.**
