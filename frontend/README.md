# Pin Frontend - Telegram Web App

Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Pin, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –Ω–∞ Next.js –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Telegram Web App.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Next.js 14** (App Router)
- **TypeScript**
- **React Leaflet** (–∫–∞—Ä—Ç–∞ —Å OpenStreetMap - –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- **Tailwind CSS** (—Å—Ç–∏–ª–∏)
- **Telegram Web App SDK** (@twa-dev/sdk)
- **json-server** (–∏–º–∏—Ç–∞—Ü–∏—è API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **MongoDB** (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
# –∏–ª–∏
yarn install
# –∏–ª–∏
pnpm install
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å API

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

```bash
npm run dev:all
```

–ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏—Ö –æ—Ç–¥–µ–ª—å–Ω–æ:

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1 - Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run dev

# –¢–µ—Ä–º–∏–Ω–∞–ª 2 - json-server (API)
npm run dev:server
```

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Next.js: [http://localhost:3000](http://localhost:3000)
- API (json-server): [http://localhost:3001](http://localhost:3001)

### –ó–∞–ø—É—Å–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ / Cursor

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `frontend`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞: `npm run dev:all`
4. –û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000) –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–í –±—Ä–∞—É–∑–µ—Ä–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é "üëÜ –ö–æ—Å–Ω–∏—Ç–µ—Å—å —Ç–æ—á–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å Pin" (–Ω–∞ –º–æ–±–∏–ª–∫–µ/Telegram –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è).

### –ó–∞–ø—É—Å–∫ –≤ Telegram Mini App

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Telegram Mini App:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç—É–Ω–Ω–µ–ª—å** (pinggy –∏–ª–∏ ngrok) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ:

   - Pinggy: `ssh -R 80:localhost:3000 -R 3001:localhost:3001 snhxv@a.free.pinggy.link`
   - Ngrok: `ngrok http 3000` –∏ `ngrok http 3001`

2. **–û–±–Ω–æ–≤–∏—Ç–µ `.env.local`** —Å URL —Ç—É–Ω–Ω–µ–ª—è:

   ```env
   NEXT_PUBLIC_API_URL=https://–≤–∞—à-—Ç—É–Ω–Ω–µ–ª—å-url.com:3001
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:

   ```bash
   npm run dev:all
   ```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ Telegram** - –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

üìñ **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: —Å–º. [TELEGRAM_TUNNEL_SETUP.md](./TELEGRAM_TUNNEL_SETUP.md)

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- ‚úÖ **–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** - —á–µ—Ä–Ω—ã–µ –∫—É—Ä—Å–æ—Ä—ã –∏ —Ç–µ–∫—Å—Ç –≤ —Ñ–æ—Ä–º–∞—Ö, —Å–≤–µ—Ç–ª—ã–µ —Å–∞–º–∏ —Ñ–æ—Ä–º—ã
- ‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–∞—Ä—Ç–æ–π, –∑–∞–∫—Ä—ã—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ –∫–Ω–æ–ø–∫–µ
- ‚úÖ **json-server** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è API (—Ñ–∞–π–ª `db.json`)
- ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –±—Ä–∞—É–∑–µ—Ä–µ** - –ø–∏–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ "–æ—Å—Ç—Ä–æ–≤" –ø—Ä–∏ –∫–ª–∏–∫–µ/—Å–æ–∑–¥–∞–Ω–∏–∏ (–∫–∞—Ä—Ç–æ—á–∫–∞ —Å–Ω–∏–∑—É), –Ω–∞ –º–æ–±–∏–ª–∫–µ –∫–∞–∫ popup
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–°–≤—è–∑–∞—Ç—å—Å—è"** - –ø—Ä–∏ –∫–ª–∏–∫–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ** - –≤–Ω–∏–∑—É –ø–æ —Ü–µ–Ω—Ç—Ä—É –Ω–∞–¥–ø–∏—Å—å —Å —ç–º–æ–¥–∑–∏ —Ç–∞–ø–∞—é—â–µ–≥–æ –ø–∞–ª—å—Ü–∞ (—Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- ‚úÖ **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–∏–Ω–∞** - 1 —á–∞—Å (–ø–∞—Ä–∞–º–µ—Ç—Ä `expires_in_hours: 1`)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –ø–∏–Ω–∞–º–∏**:
  - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–∏–Ω–∞ –∫–Ω–æ–ø–∫–æ–π "–£–¥–∞–ª–∏—Ç—å Pin"
  - ‚úÖ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø–∏–Ω–∞ –ø–æ –∫–∞—Ä—Ç–µ (drag-and-drop)
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –ª–æ–∫–∞—Ü–∏–∏
  - ‚úÖ –°–≤–æ–∏ –ø–∏–Ω—ã —á–µ—Ä–Ω—ã–µ —Å –∂–µ–ª—Ç–æ–π —Ä–∞–º–∫–æ–π –Ω–∞ –∫–∞—Ä—Ç–µ
- ‚úÖ **MongoDB –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - —Å–º. `MONGODB_SCHEMA.md` –¥–ª—è –ø–æ–ª–Ω–æ–π —Å—Ö–µ–º—ã –ë–î

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
frontend/
‚îú‚îÄ‚îÄ app/                 # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx      # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx        # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ globals.css     # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ components/         # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Map.tsx         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ MapView.tsx     # –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∫–∞—Ä—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ MapInstruction.tsx  # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ
‚îÇ   ‚îú‚îÄ‚îÄ PinCard.tsx     # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–∏–Ω–∞ (—Å–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞)
‚îÇ   ‚îú‚îÄ‚îÄ CreatePinForm.tsx   # –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∏–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ ContactModal.tsx    # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ TelegramProvider.tsx
‚îú‚îÄ‚îÄ hooks/              # Custom React hooks
‚îÇ   ‚îî‚îÄ‚îÄ useTelegram.ts  # –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Web App
‚îú‚îÄ‚îÄ lib/                # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api.ts          # API –∫–ª–∏–µ–Ω—Ç (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å json-server –∏ MongoDB)
‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts     # Telegram —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ types/              # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ db.json             # –ë–î –¥–ª—è json-server
‚îú‚îÄ‚îÄ MONGODB_SCHEMA.md   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MongoDB
‚îî‚îÄ‚îÄ package.json
```

## API Endpoints (json-server)

### GET /pins

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–∏–Ω—ã

```bash
curl http://localhost:3001/pins
```

### POST /pins

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∏–Ω

```bash
curl -X POST http://localhost:3001/pins \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ü–æ–µ—Ö–∞—Ç—å –≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç",
    "description": "–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å",
    "price": 1100,
    "contact_info": { "phone": "+7 999 111 11 11" },
    "location": { "lat": 55.7558, "lng": 37.6173 },
    "created_at": "2026-01-11T14:00:00Z",
    "expires_at": "2026-01-11T15:00:00Z",
    "is_active": true,
    "views_count": 0,
    "owner_id": "user_123",
    "is_own": true
  }'
```

### PATCH /pins/:id

–û–±–Ω–æ–≤–∏—Ç—å –ø–∏–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é)

```bash
curl -X PATCH http://localhost:3001/pins/1 \
  -H "Content-Type: application/json" \
  -d '{
    "location": { "lat": 55.7600, "lng": 37.6200 }
  }'
```

### DELETE /pins/:id

–£–¥–∞–ª–∏—Ç—å –ø–∏–Ω

```bash
curl -X DELETE http://localhost:3001/pins/1
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```env
NEXT_PUBLIC_API_URL=http://localhost:3001
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é API –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å –∞–¥—Ä–µ—Å–∞ `http://localhost:3001` (–¥–ª—è json-server)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –¢–µ–º—ã –∏ —Å—Ç–∏–ª–∏

- **globals.css** - —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ CSS –¥–ª—è —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã
- **tailwind.config.ts** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π –ø–∞–ª–∏—Ç—Ä—ã –¥–ª—è Telegram –∏ Pin
- –í—Å–µ –∏–Ω–ø—É—Ç—ã –∏–º–µ—é—Ç —á–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —á–µ—Ä–Ω—ã–π –∫—É—Ä—Å–æ—Ä (`caret-color`)

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Telegram

–í `useTelegram.ts`:

- `WebApp.lockOrientation()` - –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é —ç–∫—Ä–∞–Ω–∞
- `WebApp.onEvent('backButtonClicked', ...)` - –æ—Ç–∫–ª—é—á–∞–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–Ω–æ–ø–∫–µ "–Ω–∞–∑–∞–¥"

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ

- `MapInstruction.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (`isTelegram === false`)
- –ù–∞ –º–æ–±–∏–ª–∫–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∞

### –ü–∏–Ω—ã –∏ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

- **–ó–µ–ª–µ–Ω—ã–µ –ø–∏–Ω—ã (—á—É–∂–∏–µ)** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç (`#1a5f3f`)
- **–ß—ë—Ä–Ω—ã–µ –ø–∏–Ω—ã (—Å–≤–æ–∏)** - —Ü–≤–µ—Ç `#000000` —Å –∂—ë–ª—Ç–æ–π —Ä–∞–º–∫–æ–π (`#FFD700`)
- **Draggable** - —Å–≤–æ–∏ –ø–∏–Ω—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å –ø–æ –∫–∞—Ä—Ç–µ
- **–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ** - —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ TTL –∏–Ω–¥–µ–∫—Å –≤ MongoDB

### API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–í `lib/api.ts`:

- `GET` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `POST` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `PATCH` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏)
- `DELETE` - —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## –ü–µ—Ä–µ—Ö–æ–¥ —Å json-server –Ω–∞ MongoDB

–î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ production:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MongoDB –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB Atlas
2. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–≥–ª–∞—Å–Ω–æ `MONGODB_SCHEMA.md`
3. –°–æ–∑–¥–∞–π—Ç–µ backend API (Node.js/Express –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
4. –û–±–Ω–æ–≤–∏—Ç–µ `NEXT_PUBLIC_API_URL` –≤ `.env.local` –Ω–∞ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ backend
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö

## –°–±–æ—Ä–∫–∞ –¥–ª—è production

```bash
npm run build
npm run start
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram:

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newapp` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Web App
3. –£–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [ngrok](https://ngrok.com/) –¥–ª—è —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∏–Ω–æ–≤

–ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ –ø–∏–Ω–∞ –ø–æ –∫–∞—Ä—Ç–µ:

1. –ú–∞—Ä–∫–µ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è draggable (–µ—Å–ª–∏ `is_own: true`)
2. –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `dragend`
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è PATCH –∑–∞–ø—Ä–æ—Å –Ω–∞ API —Å –Ω–æ–≤—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
4. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ expand() –≤ Telegram

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç `expand()` –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–∏–Ω–∞
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –ø–∏–Ω–∞
- –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏.

## Troubleshooting

### json-server –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3001 —Å–≤–æ–±–æ–¥–µ–Ω
lsof -i :3001
# –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
json-server --watch db.json --port 3002
```

### –ö–∞—Ä—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Leaflet CSS –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä

### –ü–∏–Ω—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ json-server –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ API
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Dev Tools Network –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Next.js –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://nextjs.org/docs)
- [React Leaflet](https://react-leaflet.js.org/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Telegram Web App API](https://core.telegram.org/bots/webapps)
- [MongoDB –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.mongodb.com/)
- [json-server](https://github.com/typicode/json-server)
