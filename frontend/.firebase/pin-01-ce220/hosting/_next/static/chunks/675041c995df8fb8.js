(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31342,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let n=e.r(19551);function l({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},65562,(e,t,r)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return n}})},29106,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return s}});let n=e.r(48277),l=e.r(69941),o=e.r(26628),i=e.r(65562),a=e.r(26159);function s({moduleIds:e}){if("u">typeof window)return null;let t=o.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let n=t.reactLoadableManifest;for(let t of e){if(!n[t])continue;let e=n[t].files;r.push(...e)}}if(0===r.length)return null;let s=(0,a.getDeploymentIdQueryOrEmptyString)();return(0,n.jsx)(n.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}${s}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,l.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69656,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return u}});let n=e.r(48277),l=e.r(30668),o=e.r(31342),i=e.r(29106);function a(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},u=function(e){let t={...s,...e},r=(0,l.lazy)(()=>t.loader().then(a)),u=t.loading;function c(e){let a=u?(0,n.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,c=s?l.Suspense:l.Fragment,d=t.ssr?(0,n.jsxs)(n.Fragment,{children:["u"<typeof window?(0,n.jsx)(i.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(c,{...s?{fallback:a}:{},children:d})}return c.displayName="LoadableComponent",c}},62870,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return l}});let n=e.r(35856)._(e.r(69656));function l(e,t){let r={};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,n.default)({...l,modules:l.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},48985,e=>{"use strict";var t=e.i(48277),r=e.i(30668),n=e.i(62870),l=e.i(44354);function o({onLocation:e}){return(0,r.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e([t.coords.longitude,t.coords.latitude])},e=>{console.error("Ошибка получения геолокации:",e)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):console.error("Geolocation not supported")},[e]),null}let i=({mapRef:e,minPitch:n=0,maxPitch:l=60})=>{let[o,i]=(0,r.useState)(n);return(0,t.jsxs)("div",{style:{position:"fixed",right:"5%",top:"50%",transform:"translateY(-50%)",zIndex:25,display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[(0,t.jsx)("input",{type:"range",min:n,max:l,value:o,onChange:t=>{let r=Number(t.target.value);i(r),e.current&&e.current.getMap().easeTo({pitch:r,duration:300})},style:{writingMode:"vertical-rl",WebkitAppearance:"slider-vertical",width:12,height:220,borderRadius:4,background:"rgba(255,255,255,0.2)",accentColor:"#000",cursor:"pointer"}}),(0,t.jsxs)("span",{style:{color:"#fff",fontSize:14},children:[Math.round(o),"°"]})]})},a=(0,n.default)(()=>e.A(15801).then(e=>e.Map),{loadableGenerated:{modules:[21284]},ssr:!1}),s="userThought";function u(){let e=(0,r.useRef)(null),n=(0,r.useRef)(null),[u,c]=(0,r.useState)(null),[d,f]=(0,r.useState)(!1),[p,y]=(0,r.useState)("hello");return(0,r.useEffect)(()=>{let e=window.Telegram?.WebApp;e?.DeviceStorage?.getItem&&e.DeviceStorage.getItem(s,(e,t)=>{!e&&t&&y(t)})},[]),(0,r.useEffect)(()=>{if(!d||!e.current||!u)return;let t=e.current.getMap();t.flyTo({center:u,zoom:1,essential:!0}),n.current&&(n.current.remove(),n.current=null);let r=window.Telegram?.WebApp,o=r?.initDataUnsafe?.user?.photo_url;if(!o)return;let i=document.createElement("div");i.style.position="relative",i.style.width="52px",i.style.height="52px",i.style.padding="2px",i.style.borderRadius="50%",i.style.background="#000",i.style.boxShadow="0 4px 10px rgba(0,0,0,0.35)",i.style.cursor="pointer",i.onclick=()=>{t.flyTo({center:u,zoom:10,essential:!0})};let a=document.createElement("img");a.src=o,a.style.width="48px",a.style.height="48px",a.style.borderRadius="50%",a.style.objectFit="cover",a.style.display="block",i.appendChild(a);let c=document.createElement("div");c.textContent=p||"...",c.style.position="absolute",c.style.bottom="90%",c.style.left="50%",c.style.transform="translateX(-50%) translateY(-10px)",c.style.padding="6px 10px",c.style.borderRadius="20px",c.style.background="rgba(0,0,0,0.80)",c.style.color="#fff",c.style.fontSize="12px",c.style.textAlign="center",c.style.cursor="pointer",c.style.userSelect="none",c.style.minWidth="100px",c.style.maxWidth="180px",c.style.boxShadow="0 2px 6px rgba(0,0,0,0.2)",c.onclick=e=>{e.stopPropagation();let t=prompt("Ваша мысль (до 30 символов)",p);if(null!==t){let e=t.slice(0,30),n=t.trim()?e:p;c.textContent=n,y(n),r?.DeviceStorage?.setItem(s,n,(e,t)=>{e&&console.error("Ошибка сохранения мысли:",e)})}},i.appendChild(c),n.current=new l.default.Marker({element:i,anchor:"center"}).setLngLat(u).addTo(t)},[d,u,p]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{onLocation:c}),(0,t.jsx)(i,{mapRef:e,minPitch:0,maxPitch:60}),(0,t.jsx)(a,{ref:e,initialViewState:{latitude:u?.[1]??0,longitude:u?.[0]??0,zoom:2},mapStyle:"https://api.maptiler.com/maps/streets-v4/style.json?key=U0SQYQUL3hLC7BWkcwVL",projection:"globe",onLoad:()=>f(!0),style:{width:"100%",height:"100vh"},attributionControl:!1})]})}function c(){return(0,r.useEffect)(()=>{if(window.Telegram?.WebApp){let e=window.Telegram.WebApp;e&&(e.ready(),e.requestFullscreen?.(),e.disableVerticalSwipes?.(),e.requestLocation?.())}},[]),null}function d(){return(0,t.jsxs)("div",{children:[(0,t.jsx)(c,{}),(0,t.jsx)(u,{})]})}e.s(["default",()=>d],48985)},15801,e=>{e.v(t=>Promise.all(["static/chunks/17c121e6c9a8c665.js"].map(t=>e.l(t))).then(()=>t(21284)))}]);